var $t=Object.defineProperty,Ct=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var ct=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var lt=(e,t,o)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,U=(e,t)=>{for(var o in t||(t={}))yt.call(t,o)&&lt(e,o,t[o]);if(ct)for(var o of ct(t))wt.call(t,o)&&lt(e,o,t[o]);return e},H=(e,t)=>Ct(e,xt(t));var S=(e,t,o)=>new Promise((n,s)=>{var r=_=>{try{l(o.next(_))}catch(g){s(g)}},a=_=>{try{l(o.throw(_))}catch(g){s(g)}},l=_=>_.done?n(_.value):Promise.resolve(_.value).then(r,a);l((o=o.apply(e,t)).next())});import{c as u,o as p,h as bt,p as x,a as y,r as A,b as w,F as E,d as B,e as c,f as Z,w as St,t as k,n as q,g as it,u as F,i as v,j as At,k as kt,l as R,m as V,q as Y,s as dt,v as Tt,x as Lt,y as It,z as pt,A as Et,B as Dt}from"./vendor.js";const Pt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};Pt();const ut={},Mt={class:"cbi-section"};function Ft(e,t,o,n,s,r){return p(),u("fieldset",Mt)}ut.render=Ft;const Vt=()=>window.vue_base,Ot=e=>{if(e)return bt(e).format("YYYY-MM-DD HH:mm:ss")},Ut=()=>new Date().getTime(),Bt=e=>{const t=1024;if(e<t)return""+e+"KB";let o=t,n=0;for(let r=e/t;r>=t;r/=t)o*=t,n++;let s=["M","G","T","P","E"];return(e/100/(o/100)).toFixed(2)+s[n]},Rt=e=>{if(e==null)return 0;if(e<1e4)return e;let o=parseInt(e/1e4),n=e%1e4;return`${o}\u4E07${n}`},zt=()=>window.token||"",Kt=()=>{var e;return((e=window==null?void 0:window.device_id)==null?void 0:e.uid)||""},Zt=()=>{var e;return((e=window==null?void 0:window.device_id)==null?void 0:e.version)||""},qt=()=>{var e;return((e=window==null?void 0:window.device_id)==null?void 0:e.arch)||""},Gt=()=>"https://www.kooldns.cn/bind",_t={all:"\u5168\u90E8",sys:"\u7CFB\u7EDF",tool:"\u5DE5\u5177",net:"\u7F51\u7EDC"},Ht=e=>_t[e]?_t[e]:e;var Yt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",BasePage:Vt,formatDate:Ot,UnixDate:Ut,numberToSize:Bt,numberToSum:Rt,getToken:zt,getDeviceId:Kt,getVersion:Zt,modelArch:qt,getIframeURL:Gt,getTagValue:Ht}),h=U({},Yt);const N={setup(){return{menus:A([{to:"/installed",name:"\u5DF2\u5B89\u88C5"},{to:"/store",name:"\u5168\u90E8\u8F6F\u4EF6"},{to:"/upload",name:"\u624B\u52A8\u5B89\u88C5"},{to:"/logs",name:"\u8FD0\u884C\u65E5\u5FD7"},{to:"/webapps",name:"\u8FDC\u7A0B\u5E94\u7528"}])}}};x("data-v-1c7e3500");const Nt={class:"tabs menus"},Wt=["href","onClick"],Jt=c("div",{class:"auto"},null,-1);y();function Qt(e,t,o,n,s,r){const a=w("router-link");return p(),u("ul",Nt,[(p(!0),u(E,null,B(n.menus,l=>(p(),Z(a,{to:l.to,custom:"",key:l.to},{default:St(({href:_,navigate:g,isActive:f})=>[c("li",{class:q(f&&"active")},[c("a",{href:_,onClick:g},k(l.name),9,Wt)],2)]),_:2},1032,["to"]))),128)),Jt])}N.render=Qt;N.__scopeId="data-v-1c7e3500";const D=it.create({});D.interceptors.request.use(e=>(e.params==null&&(e.params={}),e.params=H(U({},e.params),{token:h.getToken(),_t:h.UnixDate()}),e),e=>e);D.interceptors.response.use(e=>e,e=>e);const O=it.create({baseURL:"https://istore.linkease.com"});O.interceptors.request.use(e=>(e.params==null&&(e.params={}),e.params=H(U({},e.params),{modelArch:h.modelArch(),deviceId:h.getDeviceId(),_t:h.UnixDate()}),e),e=>e);O.interceptors.response.use(e=>e);const Xt=()=>new Promise((e,t)=>S(void 0,null,function*(){try{const o=yield D({method:"GET",url:"/cgi-bin/luci/admin/store/installed"});if(o.status==200){e(o.data);return}t(o.status);return}catch(o){t(o);return}})),jt=e=>new Promise((t,o)=>S(void 0,null,function*(){try{const n=yield D({method:"POST",url:"/cgi-bin/luci/admin/store/install",params:{package:e}});if(n.status==200){t(n.data);return}o(n.status);return}catch(n){o(n);return}})),te=e=>new Promise((t,o)=>S(void 0,null,function*(){try{const n=yield D({method:"POST",url:"/cgi-bin/luci/admin/store/upgrade",params:{package:e}});if(n.status==200){t(n.data);return}o(n.status);return}catch(n){o(n);return}})),ee=e=>new Promise((t,o)=>S(void 0,null,function*(){try{const n=yield D({method:"POST",url:"/cgi-bin/luci/admin/store/remove",params:{package:e}});if(n.status==200){t(n.data);return}o(n.status);return}catch(n){o(n);return}})),ne=()=>new Promise((e,t)=>S(void 0,null,function*(){try{const o=yield D({method:"POST",url:"/cgi-bin/luci/admin/store/update"});if(o.status==200){e(o.data);return}t(o.status);return}catch(o){t(o);return}})),oe=e=>new Promise((t,o)=>S(void 0,null,function*(){try{const n=yield D({method:"GET",url:"/cgi-bin/luci/admin/store/status",params:{package:e}});if(n.status==200){t(n.data);return}o(n.status);return}catch(n){o(n);return}})),se=()=>new Promise((e,t)=>S(void 0,null,function*(){try{const o=yield D({method:"GET",url:"/cgi-bin/luci/admin/store/log"});if(o.status==200){e(o.data);return}t(o.status);return}catch(o){t(o);return}})),ae=e=>new Promise((t,o)=>S(void 0,null,function*(){try{const n=yield D({method:"POST",url:"/cgi-bin/luci/admin/store/upload",headers:{"Content-Type":"multipart/form-data"},data:e});if(n.data){t(n.data);return}}catch(n){o(n);return}o("not found soft")}));var re=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getInstalledApp:Xt,installApp:jt,upgradeApp:te,removeApp:ee,updateAppStore:ne,getAppStatus:oe,getLog:se,uploadAppIPK:ae});const ce=e=>new Promise((t,o)=>S(void 0,null,function*(){var n,s,r,a;try{const l=yield O({method:"GET",url:"/api/store/list",params:e});if(((n=l==null?void 0:l.data)==null?void 0:n.success)===0){t((s=l==null?void 0:l.data)==null?void 0:s.result);return}if((r=l==null?void 0:l.data)==null?void 0:r.message){o((a=l==null?void 0:l.data)==null?void 0:a.message);return}o("error")}catch(l){console.log(l),o(l);return}})),le=e=>`https://istore.linkease.com${e}`,ie=()=>new Promise((e,t)=>S(void 0,null,function*(){var o,n,s,r;try{const a=yield O({method:"GET",url:"/api/store/tags"});if(((o=a==null?void 0:a.data)==null?void 0:o.success)===0){e((n=a==null?void 0:a.data)==null?void 0:n.result);return}if((s=a==null?void 0:a.data)==null?void 0:s.message){t((r=a==null?void 0:a.data)==null?void 0:r.message);return}t("error")}catch(a){t(a);return}})),de=e=>new Promise((t,o)=>{O({method:"POST",url:"/api/store/expand",data:{appsId:e||[],deviceId:h.getDeviceId()}}).then(n=>{var s,r,a;if(((s=n.data)==null?void 0:s.success)==0&&((r=n.data)==null?void 0:r.result)){t((a=n.data)==null?void 0:a.result);return}o("not found expand")}).catch(n=>{o(n)})}),pe=e=>{O({method:"POST",url:"/api/store/download",data:{appId:e,deviceId:h.getDeviceId()}}).then(t=>{var o;((o=t.data)==null?void 0:o.success)!=0})},ue=e=>new Promise((t,o)=>{O({method:"POST",url:"/api/store/star",data:{appId:e,deviceId:h.getDeviceId()}}).then(n=>{var s;if(((s=n.data)==null?void 0:s.success)==0){t(n.data);return}o("not found expand")}).catch(n=>{o(n)})});var _e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getStoreAppList:ce,getStoreAppIcon:le,getStoreTags:ie,getAppExpandData:de,increasingDownloadCount:pe,postStarApp:ue}),b=U(U({},re),_e);const W={setup(){const e=F(),t=v(()=>e.state.log.action),o=v(()=>e.state.log.content),n=v(()=>e.state.log.end),s=v(()=>e.state.log.exitCode),r=A(!1),a=A(null);let l="",_=A(""),g=A("."),f="",$="";switch(t.value){case"install":l="\u6B63\u5728\u5B89\u88C5\u63D2\u4EF6",f="\u5B89\u88C5\u5B8C\u6210,\u8BF7\u5173\u95ED\u5F53\u524D\u7A97\u53E3",$="\u5B89\u88C5\u5931\u8D25,\u9519\u8BEF\u7801";break;case"uninstall":l="\u6B63\u5728\u5378\u8F7D\u63D2\u4EF6",f="\u5378\u8F7D\u6210\u529F,\u8BF7\u5173\u95ED\u5F53\u524D\u7A97\u53E3",$="\u5378\u8F7D\u5931\u8D25,\u9519\u8BEF\u7801";break;case"upgrade":l="\u6B63\u5728\u66F4\u65B0\u63D2\u4EF6",f="\u66F4\u65B0\u6210\u529F,\u8BF7\u5173\u95ED\u5F53\u524D\u7A97\u53E3",$="\u66F4\u65B0\u5931\u8D25,\u9519\u8BEF\u7801";break;case"upload":l="\u6B63\u5728\u4E0A\u4F20\u63D2\u4EF6",f="\u79BB\u7EBF\u5B89\u88C5\u6210\u529F,\u8BF7\u5173\u95ED\u5F53\u524D\u7A97\u53E3",$="\u79BB\u7EBF\u5B89\u88C5\u5931\u8D25,\u9519\u8BEF\u7801";break}At(()=>{document.body.setAttribute("lock-scroll",!0),L()}),kt(()=>{document.body.removeAttribute("lock-scroll")});const P=()=>{var m;((m=a.value)==null?void 0:m.scrollHeight)&&(a.value.scrollTop=a.value.scrollHeight)},L=()=>{setTimeout(()=>{if(n.value){i();return}b.getLog().then(m=>{if(n.value){i();return}switch(m==null?void 0:m.code){}const M=m==null?void 0:m.stdout,I=m==null?void 0:m.stderr;(M||I)&&(_.value=`${M}${I}`),g.value=`${g.value}.`,P(),L()}).catch(m=>{_.value=`${m}`,L()})},500)},i=()=>{r.value=!0},d=()=>{location.reload()};return{logText:v(()=>r.value?s.value!==void 0&&s.value!==0?`${l}
${o.value}
${$} ${s.value}
`:`${l}
${o.value}
${f}
`:`${l}
${g.value}
${_.value}
${o.value}
`),Close:d,disabled:r,textDom:a}},mounted(){this.$nextTick(()=>{const e=document.querySelector("body");e.append?e.append(this.$el):e.appendChild(this.$el)})}};x("data-v-735db9cc");const me={class:"software-log_shade"},ge=c("div",{class:"software-log_shade__bg"},null,-1),fe={class:"software-log_shade__pannel"},ve=c("div",{class:"software-log_shade__pannel-title"}," \u8F6F\u4EF6\u4E2D\u5FC3 - \u65E5\u5FD7\u8BB0\u5F55 ",-1),he=c("div",{class:"software-log_shade__pannel-now"},[c("i",null,"\xA0\xA0\xA0\xA0\u63D2\u4EF6\u5B89\u88C5/\u5378\u8F7D\u8FC7\u7A0B\u4E2D\u8BF7\u52FF\u5237\u65B0\u6B64\u9875\u9762\uFF01")],-1),$e={class:"software-log_shade__pannel-content"},Ce=["value"],xe={key:0,class:"software-log_shade__pannel-btn"};y();function ye(e,t,o,n,s,r){return p(),u("div",me,[ge,c("div",fe,[ve,he,c("div",$e,[c("textarea",{ref:"textDom",cols:"63",rows:"26",wrap:"on",readonly:"readonly",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",value:n.logText},null,8,Ce)]),n.disabled?(p(),u("div",xe,[c("button",{class:"close",onClick:t[0]||(t[0]=a=>n.Close())}," \u5173\u95ED ")])):R("",!0)])])}W.render=ye;W.__scopeId="data-v-735db9cc";const mt={components:{AnnouncementComponent:ut,TabsComponent:N,LogComponent:W},setup(){const e=F();return e.dispatch("getData"),{logStatus:v(()=>e.state.log.status)}}};function we(e,t,o,n,s,r){const a=w("TabsComponent"),l=w("router-view"),_=w("LogComponent");return p(),u(E,null,[V(a),V(l),n.logStatus?(p(),Z(_,{key:0})):R("",!0)],64)}mt.render=we;const J={props:{content:String,type:String,Close:Function},setup(e){const t=A(e.content);return setTimeout(()=>{e.Close()},2e3),{msg:t}}};x("data-v-c6cc38e4");const be={class:"loading"},Se={class:"msg"};y();function Ae(e,t,o,n,s,r){return p(),u("div",be,[c("div",Se,k(n.msg),1)])}J.render=Ae;J.__scopeId="data-v-c6cc38e4";const ke=e=>{let t={content:"",type:"",Close:()=>{n.unmount(o),document.body.removeChild(o)}};e!=null&&(typeof e=="object"?(t.content=(e==null?void 0:e.content)||"",t.type=(e==null?void 0:e.type)||""):t.content=e);let o=document.createElement("div"),n=Y(J,t);document.body.append(o),n.mount(o),dt(()=>{n.unmount(o),document.body.removeChild(o)})};const Q={props:{content:String,Close:Function},setup(e){return{message:e.content}}};x("data-v-368ec85a");const Te={class:"loading"},Le=c("div",{class:"icon"},null,-1),Ie={class:"msg"};y();function Ee(e,t,o,n,s,r){return p(),u("div",Te,[Le,c("div",Ie,k(n.message),1)])}Q.render=Ee;Q.__scopeId="data-v-368ec85a";var gt={props:{content:"",Close:()=>{}},Start(e){this.props={content:e||"\u52A0\u8F7D\u4E2D...",Close:()=>{t.unmount(o),document.body.removeChild(o)}};let t=Y(Q,this.props),o=document.createElement("div");document.body.append(o),t.mount(o),dt(()=>{this.props.Close()})},Stop(){this.props.Close()}},De={namespaced:!0,state:{Load:!1,LocalApps:[],StoreApps:[],Expand:{},Cur:{tag:"default",sort:"default",search:"",limit:30,offset:0},LocalAppsMap:{},StoreAppsMap:{}},mutations:{setExpand(e,t){e.Expand=t},setLocalApps(e,t){e.LocalApps=t||[],t.forEach(o=>{e.LocalAppsMap[o.name]=o})},setStoreApps(e,t){e.StoreApps=t||[],t.forEach(o=>{e.StoreAppsMap[o.name]=o})},setCur(e,t){for(const o in t)Object.hasOwnProperty.call(t,o)&&(e.Cur[o]=t[o])}},getters:{Cur(e){return e.Cur},LocalApps(e){let t=[...e.LocalApps],o=e.Expand;for(let n=0;n<t.length;n++){let s=t[n].name;o[s]&&(t[n].expand=o[s]),e.StoreAppsMap[s]&&(t[n].curVersion=t[n].version,t[n].curRelease=t[n].release,t[n].lastVersion=e.StoreAppsMap[s].version,t[n].lastRelease=e.StoreAppsMap[s].release)}return t},StoreApps(e){var a,l,_,g,f,$,P,L;let t=[...e.StoreApps],o=e.Expand;for(let i=0;i<t.length;i++){let d=t[i].name;o[d]&&(t[i].expand=o[d]),e.LocalAppsMap[d]&&(t[i].installed=!0,t[i].lastVersion=t[i].version,t[i].lastRelease=t[i].release,t[i].curVersion=e.LocalAppsMap[d].version,t[i].curRelease=e.LocalAppsMap[d].release)}let n=e.Cur.tag;if(n!="default"){let i=[];t.forEach(d=>{d.tags&&d.tags.forEach(C=>{C==n&&i.push(d)})}),t=i}let s=e.Cur.search;if(s){let i=[];t.forEach(d=>{let C=JSON.stringify(d);new RegExp(s,"i").test(C)&&i.push(d)}),t=i}let r=t.length;switch(e.Cur.sort){case"download":for(let i=0;i<r-1;i++)for(let d=0;d<r-1-i;d++){let C=((l=(a=t[d])==null?void 0:a.expand)==null?void 0:l.downloadCount)||0,m=((g=(_=t[d+1])==null?void 0:_.expand)==null?void 0:g.downloadCount)||0;if(C<m){let M=t[d];t[d]=t[d+1],t[d+1]=M}}break;case"star":for(let i=0;i<r-1;i++)for(let d=0;d<r-1-i;d++){let C=(($=(f=t[d])==null?void 0:f.expand)==null?void 0:$.starCount)||0,m=((L=(P=t[d+1])==null?void 0:P.expand)==null?void 0:L.starCount)||0;if(C<m){let M=t[d];t[d]=t[d+1],t[d+1]=M}}break}return t}},actions:{incrAppDownload(e,t){const{state:o}=e;o.Expand[t==null?void 0:t.name]&&o.Expand[t==null?void 0:t.name].downloadCount++},incrAppStar(e,t){const{state:o}=e;(o==null?void 0:o.Expand[t==null?void 0:t.name])&&(o.Expand[t==null?void 0:t.name].starCount++,o.Expand[t==null?void 0:t.name].isStar=!0)},filterCurApps(e,t){const{commit:o,dispatch:n}=e;o("setCur",t)},getApps(e){const{state:t,dispatch:o}=e;o("getLocalApps"),o("getStoreApps",t.Cur)},getLocalApps(e){const{commit:t}=e;b.getInstalledApp().then(o=>{o.forEach(n=>{n.installed=!0}),t("setLocalApps",o)})},getStoreApps(e,t){const{state:o,commit:n,dispatch:s}=e;let r=[];b.getStoreAppList(t).then(a=>{a.apps&&(a.apps.forEach(l=>{r.push(l.name)}),s("getStoreAppsExpand",r),n("setStoreApps",a.apps)),o.Load=!0}).catch(a=>{console.log(a)})},getStoreAppsExpand(e,t){const{commit:o}=e;b.getAppExpandData(t).then(n=>{n&&o("setExpand",n)})}}},Pe={namespaced:!0,state:{Tags:[],Total:0},mutations:{},getters:{Tags(e){return e.Tags},Total(e){return e.Total}},actions:{getTags(e){const{state:t,commit:o}=e;b.getStoreTags().then(n=>{t.Tags=(n==null?void 0:n.tags)||[],t.Total=(n==null?void 0:n.total)||0})}}},Me={namespaced:!0,state:{status:!1,action:"install",content:"",end:!1,exitCode:void 0},mutations:{setStatus(e,t){e.status=t.status,e.action=(t==null?void 0:t.action)||"install",e.content=(t==null?void 0:t.content)||"",e.end=(t==null?void 0:t.end)||!1,e.exitCode=void 0},setContent(e,t){e.content=t},setEnd(e,t){e.end=!0,e.exitCode=t}},getters:{},actions:{}},z=Tt({state:{},mutations:{},modules:{apps:De,tags:Pe,log:Me},actions:{getData(e){const{dispatch:t}=e;t("tags/getTags"),t("apps/getApps")}}}),T={Start(e,t){z.commit("log/setStatus",{status:!0,action:e,content:""})},Stop(){z.commit("log/setStatus",{status:!1,action:"install",content:""})},Add(e){z.commit("log/setContent",e)},End(e){z.commit("log/setEnd",e)}};const G={props:{col:{type:Object,default(){return{description:"",tags:[],entry:"",author:"",depends:[],installed:!1,hasupdate:!1,title:"",time:"",release:1,website:"",name:"",version:""}}}},setup(e,t){const o=v(()=>e.col),n=F(),s=h.formatDate,r=h.numberToSum,a=i=>{i.then(d=>{let C=d.stdout,m=d.stderr;T.Add(`${C}
${m}`),T.End(d.code)}).catch(d=>{T.Add(d),T.End(500)})},l=i=>{T.Start("upgrade"),a(b.upgradeApp(i))},_=i=>{T.Start("install"),b.increasingDownloadCount(i),n.dispatch("apps/incrAppDownload",{name:i}),a(b.installApp(i))},g=i=>{confirm(`\u786E\u5B9A\u8981\u5378\u8F7D ${i} \u5417?`)&&(T.Start("uninstall"),a(b.removeApp(i)))},f=i=>S(this,null,function*(){gt.Start();try{(yield b.postStarApp(i))&&n.dispatch("apps/incrAppStar",{name:i})}catch(d){}gt.Stop()}),$=()=>{ke("\u60A8\u5DF2\u7ECF\u70B9\u8D5E\u8FC7\u5566\uFF5E")},P=h.getTagValue;return{col:o,formatDate:s,numberToSum:r,upgrade:l,install:_,getAppIcon:i=>o.value.installed?`/luci-static/resources/app-icons/${i}.png`:o.value.icon?b.getStoreAppIcon(o.value.icon):`/luci-static/resources/app-icons/${i}.png`,uninstall:g,StarApp:f,StarApped:$,getTagValue:P}}};x("data-v-c8e71562");const Fe={class:"app-container"},Ve={class:"app-info"},Oe={class:"app-f"},Ue={class:"app-icon"},Be=["src"],Re={class:"app-tags"},ze={class:"tag"},Ke=c("span",{class:"block"},"\uFF5C",-1),Ze={class:"app-r"},qe=["title"],Ge={class:"app-name"},He={class:"app-version"},Ye={class:"app-as"},Ne=c("span",{style:{margin:"0 10px"}},"|",-1),We=["title"],Je={class:"app-author"},Qe={class:"app-date"},Xe={class:"app-btns"},je=["href"],tn=c("div",{class:"auto"},null,-1),en=["href"],nn=c("div",{class:"app-margin-left"},null,-1);y();function on(e,t,o,n,s,r){var _,g,f,$,P,L,i,d,C,m,M;const a=w("svg-star-off"),l=w("svg-star-on");return p(),u("div",Fe,[c("div",Ve,[c("div",Oe,[c("div",Ue,[c("img",{alt:"\u56FE\u6807\u51FA\u8D70\u5566",src:n.getAppIcon(n.col.name)},null,8,Be)]),c("div",Re,[(p(!0),u(E,null,B(n.col.tags,I=>(p(),u(E,{key:I},[c("div",ze,[c("span",null,k(n.getTagValue(I)),1)]),Ke],64))),128))])]),c("div",Ze,[c("div",{class:"app-title",title:n.col.name},[c("span",Ge,k(n.col.title),1),c("span",He,"v"+k(n.col.version),1)],8,qe),c("div",Ye,[c("span",null,k(n.numberToSum((g=(_=n.col)==null?void 0:_.expand)==null?void 0:g.downloadCount))+" \u6B21\u4E0B\u8F7D",1),Ne,c("span",null,k(n.numberToSum(($=(f=n.col)==null?void 0:f.expand)==null?void 0:$.starCount))+" \u6B21\u70B9\u8D5E",1),((P=n.col)==null?void 0:P.expand)!=null?(p(),u(E,{key:0},[((i=(L=n.col)==null?void 0:L.expand)==null?void 0:i.isStar)?(p(),u("button",{key:0,class:"star",title:"\u5DF2\u70B9\u8D5E",onClick:t[0]||(t[0]=I=>n.StarApped())},[V(a)])):(p(),u("button",{key:1,class:"star",title:"\u70B9\u8D5E",onClick:t[1]||(t[1]=I=>n.StarApp(n.col.name))},[V(l)]))],64)):R("",!0)]),c("div",{class:"app-description cbi-value-description",title:n.col.description},[c("span",null,k(n.col.description||"\u6682\u65E0\u63CF\u8FF0"),1)],8,We),c("div",Je,[c("span",null,"\u4F5C\u8005:"+k(n.col.author||"\u6682\u65E0"),1)]),c("div",Qe,[c("span",null,"\u66F4\u65B0\u65E5\u671F:"+k(n.formatDate(n.col.time*1e3)||"\u6682\u65E0"),1)])])]),c("div",Xe,[n.col.website?(p(),u("a",{key:0,class:"app-btn cbi-button cbi-button-apply",target:"_blank",href:n.col.website},"\u5B98\u7F51",8,je)):R("",!0),tn,n.col.installed?(p(),u(E,{key:1},[((d=n.col)==null?void 0:d.curVersion)!=((C=n.col)==null?void 0:C.lastVersion)||((m=n.col)==null?void 0:m.curRelease)!=((M=n.col)==null?void 0:M.lastRelease)?(p(),u("a",{key:0,class:"app-btn cbi-button cbi-button-reload",onClick:t[2]||(t[2]=I=>n.upgrade(n.col.name))},"\u66F4\u65B0")):R("",!0),n.col.entry?(p(),u("a",{key:1,class:"app-btn cbi-button cbi-button-apply",href:n.col.entry},"\u6253\u5F00",8,en)):R("",!0),nn,c("a",{class:"app-btn cbi-button cbi-button-remove",onClick:t[3]||(t[3]=I=>n.uninstall(n.col.name))},"\u5378\u8F7D")],64)):(p(),u("a",{key:2,class:"app-btn cbi-button cbi-button-add",onClick:t[4]||(t[4]=I=>n.install(n.col.name))},"\u5B89\u88C5"))])])}G.render=on;G.__scopeId="data-v-c8e71562";const X={components:{AppComponent:G},setup(){const e=F();return{apps:v(()=>e.getters["apps/LocalApps"])}}};x("data-v-708cb351");const sn={class:"cbi-section"},an={class:"containers"};y();function rn(e,t,o,n,s,r){const a=w("AppComponent");return p(),u("fieldset",sn,[c("div",an,[(p(!0),u(E,null,B(n.apps,l=>(p(),Z(a,{key:l.name,col:l},null,8,["col"]))),128))])])}X.render=rn;X.__scopeId="data-v-708cb351";const j={setup(){const e=A("default"),t=F(),o=A([{key:"\u9ED8\u8BA4",value:"default"},{key:"\u6309\u4E0B\u8F7D\u6570",value:"download"},{key:"\u6309\u8BC4\u5206",value:"star"}]);return{selectSort:s=>{e.value=s,t.dispatch("apps/filterCurApps",{sort:s})},curSort:e,sorts:o}}};x("data-v-e8823026");const cn={class:"sort-container"},ln=c("div",{class:"sort-title"},"\u6392\u5E8F:",-1),dn={class:"sort-value"},pn=["value","onClick"];y();function un(e,t,o,n,s,r){return p(),u("div",cn,[ln,c("div",dn,[(p(!0),u(E,null,B(n.sorts,a=>(p(),u("input",{key:a.value,class:q(["cbi-button",{"cbi-button-apply":n.curSort==a.value}]),type:"button",value:a.key,onClick:l=>n.selectSort(a.value)},null,10,pn))),128))])])}j.render=un;j.__scopeId="data-v-e8823026";const tt={setup(){const e=A("default"),t=F(),o=v(()=>t.getters["tags/Tags"]),n=h.getTagValue;return{tags:o,curTag:e,selectTag:r=>{e.value=r,t.dispatch("apps/filterCurApps",{tag:r})},getTagValue:n}}};x("data-v-5b43124a");const _n={class:"tags-container"},mn=c("div",{class:"tags-title"}," \u6807\u7B7E: ",-1),gn={class:"tags-value"},fn=["value","onClick"];y();function vn(e,t,o,n,s,r){return p(),u("div",_n,[mn,c("div",gn,[c("input",{class:q(["cbi-button",{"cbi-button-apply":n.curTag=="default"}]),type:"button",value:"\u9ED8\u8BA4",onClick:t[0]||(t[0]=a=>n.selectTag("default"))},null,2),(p(!0),u(E,null,B(n.tags,a=>(p(),u("input",{key:a,class:q(["cbi-button",{"cbi-button-apply":n.curTag==a}]),type:"button",value:n.getTagValue(a),onClick:l=>n.selectTag(a)},null,10,fn))),128))])])}tt.render=vn;tt.__scopeId="data-v-5b43124a";const et={setup(){const e=A(""),t=F();return{searchKey:e,submitSearch:()=>{t.dispatch("apps/filterCurApps",{search:e.value})}}}};function hn(e,t,o,n,s,r){const a=w("svg-search");return p(),u("form",{class:"search",onSubmit:t[1]||(t[1]=pt((...l)=>n.submitSearch&&n.submitSearch(...l),["prevent"]))},[c("button",null,[V(a)]),Lt(c("input",{type:"text",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","onUpdate:modelValue":t[0]||(t[0]=l=>n.searchKey=l)},null,512),[[It,n.searchKey,void 0,{trim:!0}]])],32)}et.render=hn;et.__scopeId="data-v-29470523";const nt={components:{AppComponent:G},setup(e){const t=F(),o=v(()=>t.getters["apps/StoreApps"]),n=v(()=>t.state.apps.Load);return{apps:o,load:n}}};x("data-v-7dcdd37e");const $n={class:"containers"},Cn={key:1,style:{margin:"10px 0","text-align":"center",width:"100%"}};y();function xn(e,t,o,n,s,r){const a=w("AppComponent");return p(),u("div",$n,[n.load?(p(!0),u(E,{key:0},B(n.apps,l=>(p(),Z(a,{key:l.name,col:l},null,8,["col"]))),128)):(p(),u("span",Cn,"\u6B63\u5728\u52AA\u529B\u7684\u83B7\u53D6\u6570\u636E..."))])}nt.render=xn;nt.__scopeId="data-v-7dcdd37e";const ot={name:"Store",components:{SortComponent:j,TagComponent:tt,SearchComponent:et,AppsComponent:nt},setup(){}};x("data-v-603a8f16");const yn={class:"cbi-section"};y();function wn(e,t,o,n,s,r){const a=w("SearchComponent"),l=w("TagComponent"),_=w("SortComponent"),g=w("AppsComponent");return p(),u("fieldset",yn,[V(a),V(l),V(_),V(g)])}ot.render=wn;ot.__scopeId="data-v-603a8f16";const st={setup(){const e=A(null),t=n=>{const s=n.target.files;if(s&&s.length>0){const r=s[0];o(r);return}},o=n=>{let s=new FormData;s.append(n.name,n),T.Start("upload"),b.uploadAppIPK(s).then(r=>{let a=r.stdout,l=r.stderr;T.Add(`${a}
${l}`),T.End(r.code)}).catch(r=>{T.Add(r),T.End(500)})};return{file:e,uploadFile:t,sumbitUpload:o}}};x("data-v-483c9a1e");const bn={class:"cbi-section"},Sn=c("div",{class:"container_msg cbi-map-descr"},[c("span",null,"\u79BB\u7EBF\u5B89\u88C5"),c("span",null," \xB7 \u901A\u8FC7\u672C\u9875\uFF0C\u4F60\u53EF\u4EE5\u4E0A\u4F20\u63D2\u4EF6\u5305\u6765\u5B89\u88C5\u63D2\u4EF6\uFF1B"),c("span",null," \xB7 \u79BB\u7EBF\u5B89\u88C5\u53EF\u7528\u7684 ipk \u63D2\u4EF6")],-1),An={class:"flex"},kn={class:"upload-file"},Tn=c("div",{class:"button"},"\u9009\u62E9\u6587\u4EF6",-1),Ln=c("div",{class:"auto"},null,-1);y();function In(e,t,o,n,s,r){var a;return p(),u("fieldset",bn,[Sn,c("form",{onSubmit:t[1]||(t[1]=pt((...l)=>n.sumbitUpload&&n.sumbitUpload(...l),["prevent"]))},[c("div",An,[c("label",kn,[c("span",null,k(((a=n.file)==null?void 0:a.name)||"\u672A\u9009\u62E9\u4EFB\u4F55\u6587\u4EF6"),1),c("input",{type:"file",name:"file",accept:".ipk,.run",hidden:"",onChange:t[0]||(t[0]=(...l)=>n.uploadFile&&n.uploadFile(...l))},null,32),Tn]),Ln])],32)])}st.render=In;st.__scopeId="data-v-483c9a1e";const at={setup(){F();const e=v(()=>""),t=v(()=>""),o=v(()=>`${h.getIframeURL()}/#/apps?token=${t.value}&deviceId=${e.value}`);return{token:t,deviceId:e,iframeUrl:o}}};x("data-v-19ff0ff6");const En={class:"cbi-section"},Dn={class:"webapp-container"},Pn=["src"];y();function Mn(e,t,o,n,s,r){return p(),u("fieldset",En,[c("div",Dn,[c("iframe",{src:n.iframeUrl,sandbox:"allow-scripts allow-same-origin allow-popups",seamless:""},null,8,Pn)])])}at.render=Mn;at.__scopeId="data-v-19ff0ff6";const rt={setup(){const e=A(""),t=()=>{b.getLog().then(o=>{if(o.code==0)switch(o.stdout==""&&o.stderr==""?e.value="\u6682\u65E0\u65E5\u5FD7":e.value=`${e.value}
${o.stdout}
${o.stderr}`,o.code){case 0:break;case 206:t();break}})};return t(),{logContent:e}}};x("data-v-6bb75899");const Fn={class:"cbi-section"},Vn={class:"log-containers"},On=["value"];y();function Un(e,t,o,n,s,r){return p(),u("fieldset",Fn,[c("div",Vn,[c("textarea",{id:"syslog",cols:"63",rows:"32",wrap:"on",readonly:"readonly",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",value:n.logContent},null,8,On)])])}rt.render=Un;rt.__scopeId="data-v-6bb75899";const Bn=Et({history:Dt(h.BasePage()),routes:[{path:"/",redirect:"/installed"},{path:"/installed",name:"Installed",component:X},{path:"/store",name:"Store",component:ot},{path:"/upload",name:"Upload",component:st},{path:"/webapps",name:"Webapps",component:at},{path:"/logs",name:"Logs",component:rt},{path:"/:pathMatch(.*)*",name:"notfound",redirect:"/"}]}),ft={},Rn={width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},zn=c("path",{d:"M14.9234958,14.5525054 L10.84453,10.4679606 C11.8849284,9.46327833 12.5294813,8.07823887 12.5294813,6.55073066 C12.5294813,3.48989918 9.94358337,1 6.76474066,1 C3.58589795,1 1,3.48989918 1,6.55073066 C1,9.61156213 3.58589795,12.1014613 6.76474066,12.1014613 C8.16008242,12.1014613 9.44067838,11.621191 10.438802,10.8242646 L14.5276502,14.9188536 C14.5814545,14.9730393 14.6533765,15 14.725573,15 C14.7942009,15 14.8625542,14.9754182 14.9158095,14.9262546 C15.025065,14.8250198 15.0283592,14.6577049 14.9234958,14.5525054 Z M6.76474066,11.5728203 C3.8886841,11.5728203 1.54902292,9.32001661 1.54902292,6.55073066 C1.54902292,3.7814447 3.8886841,1.52864101 6.76474066,1.52864101 C9.64079723,1.52864101 11.9804584,3.7814447 11.9804584,6.55073066 C11.9804584,9.32001661 9.64052272,11.5728203 6.76474066,11.5728203 Z",id:"Shape",stroke:"#FFFFFF","stroke-width":"1.3"},null,-1),Kn=[zn];function Zn(e,t,o,n,s,r){return p(),u("svg",Rn,Kn)}ft.render=Zn;const vt={},qn={width:"12px",height:"12px",viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Gn=c("path",{d:"M10.171916,3.81818329 C10.6519813,3.81274681 11.1102149,4.01840688 11.4252438,4.38069009 C11.7402726,4.74297329 11.8803105,5.2253253 11.8081406,5.70080197 L11.0555552,10.608963 C10.9332063,11.4157454 10.2351606,12.0090843 9.42537185,12 L3.27269856,12 C2.97145497,12 2.7272488,11.7556885 2.7272488,11.454445 L2.7272488,5.4544976 C2.7272488,5.37817917 2.74326442,5.30271013 2.77426027,5.23296947 L4.95605931,0.323921631 C5.04360472,0.126944443 5.23894201,0 5.4544976,0 C6.65947193,0 7.63629663,0.976824702 7.63629663,2.18179904 L7.63629663,3.81815451 L10.171916,3.81818329 Z M3.81814832,10.9090654 L9.43153778,10.9090654 C9.70352269,10.9121048 9.93620458,10.7143252 9.97712277,10.4445109 L10.7297188,5.53628009 C10.7537339,5.3780602 10.7070546,5.2172762 10.602045,5.09651513 C10.4970353,4.97575406 10.3442908,4.9072007 10.1780925,4.90904784 L7.09084687,4.90904784 C6.78960329,4.90904784 6.54539711,4.66484166 6.54539711,4.36359808 L6.54539711,2.18179904 C6.54539711,1.69494967 6.22647822,1.2825878 5.78615711,1.14223013 L3.81814832,5.57024992 L3.81814832,10.9090654 Z M2.7272488,5.99994736 L1.63634928,5.99994736 C1.33510569,5.99994736 1.09089952,6.24415353 1.09089952,6.54539711 L1.09089952,10.3635454 C1.09089952,10.664789 1.33510569,10.9089952 1.63634928,10.9089952 L2.7272488,10.9089952 L2.7272488,5.99994736 Z M3.27269856,11.9998947 L1.63634928,11.9998947 C0.732618527,11.9998947 -1.03028697e-13,11.2672762 -1.03028697e-13,10.3635454 L-1.03028697e-13,6.54539711 C-1.03028697e-13,5.64166636 0.732618527,4.90904784 1.63634928,4.90904784 L3.27269856,4.90904784 C3.57394214,4.90904784 3.81814832,5.15325401 3.81814832,5.4544976 L3.81814832,11.454445 C3.81814832,11.7556885 3.57394214,11.9998947 3.27269856,11.9998947 Z",id:"Shape",fill:"#FFFFFF","fill-rule":"nonzero"},null,-1),Hn=[Gn];function Yn(e,t,o,n,s,r){return p(),u("svg",qn,Hn)}vt.render=Yn;const ht={},Nn={width:"12px",height:"12px",viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Wn=c("path",{d:"M10.171916,3.81818329 C10.6519813,3.81274681 11.1102149,4.01840688 11.4252438,4.38069009 C11.7402726,4.74297329 11.8803105,5.2253253 11.8081406,5.70080197 L11.0555552,10.608963 C10.9332063,11.4157454 10.2351606,12.0090843 9.42537185,12 L3.27269856,12 C2.97145497,12 2.7272488,11.7556885 2.7272488,11.454445 L2.7272488,5.4544976 C2.7272488,5.37817917 2.74326442,5.30271013 2.77426027,5.23296947 L4.95605931,0.323921631 C5.04360472,0.126944443 5.23894201,0 5.4544976,0 C6.65947193,0 7.63629663,0.976824702 7.63629663,2.18179904 L7.63629663,3.81815451 L10.171916,3.81818329 Z M3.27269856,11.9998947 L1.63634928,11.9998947 C0.732618527,11.9998947 0,11.2672762 0,10.3635454 L0,6.54539711 C0,5.64166636 0.732618527,4.90904784 1.63634928,4.90904784 L3.27269856,4.90904784 C3.57394214,4.90904784 3.81814832,5.15325401 3.81814832,5.4544976 L3.81814832,11.454445 C3.81814832,11.7556885 3.57394214,11.9998947 3.27269856,11.9998947 Z",id:"Shape",fill:"#FFE45A","fill-rule":"nonzero"},null,-1),Jn=[Wn];function Qn(e,t,o,n,s,r){return p(),u("svg",Nn,Jn)}ht.render=Qn;const K=Y(mt);K.component("svg-search",ft);K.component("svg-star-on",vt);K.component("svg-star-off",ht);K.use(Bn).use(z);K.mount("#app");
